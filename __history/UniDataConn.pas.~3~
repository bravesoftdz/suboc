unit UniDataConn;

interface

uses
  SysUtils, Classes, DB, ADODB, DBAccess, Uni,
  UniProvider, MySQLUniProvider;

type
  TdmConn = class(TDataModule)
    
    conUni: TUniConnection;
    mysqlnprvdr1: TMySQLUniProvider;
    procedure connBeforeConnect(Sender: TObject);
  private
    { Private declarations }
  public
    { Public declarations }
  end;

var
  dmConn: TdmConn;

implementation

uses inLibDir, inLibtb, inLibUser;

{$R *.dfm}

procedure TdmConn.connBeforeConnect(Sender: TObject);
var
  sCatalog          ,
  sCodePage         ,
  sDatabase         ,
  sHostName         ,
  sPassword         ,
  sPort             ,
  sUser: string;
begin

  sCatalog      := leCadINI('ConnData', 'Catalog','custom-server');
  sCodePage     := leCadINI('ConnData', 'CodePage','latin1');
  sDatabase := leCadINI('ConnData', 'Database','subocasana');
  sHostName :=  leCadINI('ConnData', 'HostName','192.168.1.200');
  sPassword :=  leCadINI('ConnData', 'Password','Glenroot2014');
  sPort :=  leCadINI('ConnData', 'Puerto','3306');
  sUser :=  leCadINI('ConnData', 'User', 'glent');
  conUni.ConnectString := 'Provider Name=MySQL;User ID=' + sUroot;Password=1F6W6i1j1;Data Source=127.0.0.1;Database=subocasana;Login Prompt=False
//  ZconnGlent.librarylocation := ExtractFilePath(ParamStr(0))+ 'libmysql.dll';
//  ZconnGlent.Catalog := sCatalog;
//  zconnGlent.ClientCodepage := sCodePage;
//  zconnGlent.Database := sDatabase;
//  zconnGlent.HostName := sHostName;
//  zconnGlent.Password := sPassword;
//  zconnGlent.Port := StrToIntDef(sPort, 3306);
//  zconnGlent.User := sUser;

 //ZconnGlent.librarylocation := ExtractFilePath(ParamStr(0))+ 'libmysql.dll';
end;

end.
